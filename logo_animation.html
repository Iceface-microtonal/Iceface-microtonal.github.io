<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>小さなカオス</title>
<style>
    body, html {
        height: 100%;
        margin: 0;
        overflow: hidden;
        background-color: #f0f4f8;
        /* 中央に配置するためのフレックスボックス設定 */
        display: flex;
        justify_content: center;
        align-items: center;
    }
    
    /* アニメーションの舞台（この枠内だけで動きます） */
    #chaos-container {
        position: relative;
        width: 600px;  /* 横幅の制限 */
        height: 400px; /* 縦幅の制限 */
        /* 枠が見たい場合は下のコメントアウトを外してください */
        /* border: 1px dashed #ccc; */
        pointer-events: none;
    }

    .chaos-img {
        position: absolute;
        width: 60px; /* 基本サイズを小さめに */
        height: auto;
        will-change: transform, left, top, opacity;
        opacity: 0; /* 最初は透明 */
    }

    /* --- ゆったりとしたアニメーション定義 --- */
    /* 非常にゆっくり回転 */
    @keyframes slow-spin { 
        from { transform: rotate(0deg); } 
        to { transform: rotate(360deg); } 
    }
    /* 逆回転 */
    @keyframes slow-spin-rev { 
        from { transform: rotate(360deg); } 
        to { transform: rotate(0deg); } 
    }
    /* ゆらゆら揺れる */
    @keyframes gentle-sway { 
        0%, 100% { transform: rotate(-10deg); } 
        50% { transform: rotate(10deg); } 
    }

    /* JavaScriptで付与するクラス（時間は長めに設定） */
    .anim-spin { animation: slow-spin 20s linear infinite; }
    .anim-spin-rev { animation: slow-spin-rev 25s linear infinite; }
    .anim-sway { animation: gentle-sway 8s ease-in-out infinite; }

</style>
</head>
<body>

    <div id="chaos-container"></div>

<script>
    const container = document.getElementById('chaos-container');
    const imageFiles = ['pa.png', 'pe.png', 'to.png', 'i.png', 'n.png'];
    
    // 動きのパターンのリスト
    const animClasses = ['anim-spin', 'anim-spin-rev', 'anim-sway', ''];

    function createLittleChaos() {
        const img = document.createElement('img');
        img.classList.add('chaos-img');

        // 画像選択
        img.src = imageFiles[Math.floor(Math.random() * imageFiles.length)];

        // コンテナのサイズを取得
        const containerW = container.offsetWidth;
        const containerH = container.offsetHeight;

        // --- 狭い範囲での座標計算 ---
        // コンテナ内のどこかランダムな位置に出現
        const startX = Math.random() * (containerW - 50);
        const startY = Math.random() * (containerH - 50);
        
        // コンテナ内の別の位置へ移動（移動距離を短めに制限）
        // 現在地から -100px ～ +100px くらいの範囲で少しだけ動くイメージ
        const moveRange = 150; 
        const endX = startX + (Math.random() * moveRange * 2 - moveRange);
        const endY = startY + (Math.random() * moveRange * 2 - moveRange);

        img.style.left = `${startX}px`;
        img.style.top = `${startY}px`;

        // --- ゆっくりとしたパラメータ設定 ---
        const duration = 10 + Math.random() * 10; // 10秒〜20秒かけてゆっくり動く
        const scale = 0.6 + Math.random() * 0.6; // 大きさは0.6倍〜1.2倍程度（あまり大きくしない）
        const rotate = Math.random() * 90 - 45; // 移動に伴う回転も控えめに(-45度〜45度)

        // 追加のゆったりアニメーションを付与
        const extraAnim = animClasses[Math.floor(Math.random() * animClasses.length)];
        if(extraAnim) img.classList.add(extraAnim);

        // CSS Transitionの設定（透明度も変化させる）
        // ふわっと現れて(ease-in)、ふわっと消える
        img.style.transition = `
            left ${duration}s ease-in-out,
            top ${duration}s ease-in-out,
            transform ${duration}s ease-in-out,
            opacity 2s ease-in-out
        `;

        // 初期変形
        img.style.transform = `scale(0.1) rotate(0deg)`;
        
        container.appendChild(img);

        // アニメーション開始
        requestAnimationFrame(() => {
            requestAnimationFrame(() => {
                // 座標移動
                img.style.left = `${endX}px`;
                img.style.top = `${endY}px`;
                // 変形適用
                img.style.transform = `scale(${scale}) rotate(${rotate}deg)`;
                // 不透明にする（表示）
                img.style.opacity = '0.8'; 
            });
        });

        // 寿命が来る少し前にフェードアウトさせる
        setTimeout(() => {
            img.style.opacity = '0'; // 消える
        }, (duration - 2) * 1000);

        // 完全に終わったらDOMから削除
        setTimeout(() => {
            img.remove();
        }, duration * 1000);
    }

    // 生成ペースもゆっくりに（0.8秒に1個）
    setInterval(createLittleChaos, 800);

</script>
</body>
</html>
